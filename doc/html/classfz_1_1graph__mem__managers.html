<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Formalizer: fz::graph_mem_managers Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="formalizer-logo-20200907-41x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Formalizer
   &#160;<span id="projectnumber">2.0.0-0.1</span>
   </div>
   <div id="projectbrief">The Formalizer System Support Environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacefz.html">fz</a></li><li class="navelem"><a class="el" href="classfz_1_1graph__mem__managers.html">graph_mem_managers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classfz_1_1graph__mem__managers-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fz::graph_mem_managers Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Keep track of multiple shared memory segments, switch which one is considered active for allocator use, and provide manager and allocator references.  
 <a href="classfz_1_1graph__mem__managers.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Graphtypes_8hpp_source.html">Graphtypes.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for fz::graph_mem_managers:</div>
<div class="dyncontent">
<div class="center"><img src="classfz_1_1graph__mem__managers__coll__graph.png" border="0" usemap="#fz_1_1graph__mem__managers_coll__map" alt="Collaboration graph"/></div>
<map name="fz_1_1graph__mem__managers_coll__map" id="fz_1_1graph__mem__managers_coll__map">
<area shape="rect" id="node2" href="structfz_1_1shared__memory__manager.html" title="Every shared memory segment (e.g. for a different copy of a Graph) can have its own instance of these..." alt="" coords="5,5,196,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af9849b4aec71730fdab3b98a868c0738"><td class="memItemLeft" align="right" valign="top"><a id="af9849b4aec71730fdab3b98a868c0738"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>add_manager</b> (std::string segname, <a class="el" href="namespacefz.html#aabee04df43b16403996baaf6bd9d2a53">segment_memory_t</a> &amp;segmem, void_allocator &amp;allocinst)</td></tr>
<tr class="separator:af9849b4aec71730fdab3b98a868c0738"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad751b95fcc96afc311a7492d5715c249"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#ad751b95fcc96afc311a7492d5715c249">forget_manager</a> (std::string segname)</td></tr>
<tr class="memdesc:ad751b95fcc96afc311a7492d5715c249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a manager from the set of managers and delete the corresponding allocator and segment memory objects - but do not destroy the shared memory.  <a href="#ad751b95fcc96afc311a7492d5715c249">More...</a><br /></td></tr>
<tr class="separator:ad751b95fcc96afc311a7492d5715c249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8e075a8e0c2529465f40db713b4d56"><td class="memItemLeft" align="right" valign="top"><a id="a0b8e075a8e0c2529465f40db713b4d56"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>set_active</b> (std::string segname)</td></tr>
<tr class="separator:a0b8e075a8e0c2529465f40db713b4d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3df10bbaf27f8a55826d85d66e0f53"><td class="memItemLeft" align="right" valign="top"><a id="a0b3df10bbaf27f8a55826d85d66e0f53"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_remove_on_exit</b> (bool _removeonexit)</td></tr>
<tr class="separator:a0b3df10bbaf27f8a55826d85d66e0f53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d814cc94e566d6858f74f0e902470e4"><td class="memItemLeft" align="right" valign="top"><a id="a4d814cc94e566d6858f74f0e902470e4"></a>
<a class="el" href="structfz_1_1shared__memory__manager.html">shared_memory_manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_active</b> () const</td></tr>
<tr class="separator:a4d814cc94e566d6858f74f0e902470e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd42ffd5c35536c76057cb5f594a9e1b"><td class="memItemLeft" align="right" valign="top"><a id="abd42ffd5c35536c76057cb5f594a9e1b"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_active_name</b> () const</td></tr>
<tr class="separator:abd42ffd5c35536c76057cb5f594a9e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0466bdd56ceeceb383f87e3d44bcac3"><td class="memItemLeft" align="right" valign="top"><a id="ad0466bdd56ceeceb383f87e3d44bcac3"></a>
<a class="el" href="namespacefz.html#aabee04df43b16403996baaf6bd9d2a53">segment_memory_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>get_segmem</b> () const</td></tr>
<tr class="separator:ad0466bdd56ceeceb383f87e3d44bcac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae65cb774e01de8bba0cdd9511229b39"><td class="memItemLeft" align="right" valign="top"><a id="aae65cb774e01de8bba0cdd9511229b39"></a>
const segment_manager_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_segman</b> () const</td></tr>
<tr class="separator:aae65cb774e01de8bba0cdd9511229b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3066f2a1fe7ebb325b6f8fa1fc2da5"><td class="memItemLeft" align="right" valign="top"><a id="abc3066f2a1fe7ebb325b6f8fa1fc2da5"></a>
const void_allocator &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#abc3066f2a1fe7ebb325b6f8fa1fc2da5">get_allocator</a> () const</td></tr>
<tr class="memdesc:abc3066f2a1fe7ebb325b6f8fa1fc2da5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get allocator for the active segment. <br /></td></tr>
<tr class="separator:abc3066f2a1fe7ebb325b6f8fa1fc2da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e5339673869d4485a8f7d718c163fda"><td class="memItemLeft" align="right" valign="top">const void_allocator &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#a2e5339673869d4485a8f7d718c163fda">get_allocator</a> (std::string segname) const</td></tr>
<tr class="memdesc:a2e5339673869d4485a8f7d718c163fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get allocator for named segment (does not change active)  <a href="#a2e5339673869d4485a8f7d718c163fda">More...</a><br /></td></tr>
<tr class="separator:a2e5339673869d4485a8f7d718c163fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c7e70d241f25a56a485871d95158541"><td class="memItemLeft" align="right" valign="top"><a id="a7c7e70d241f25a56a485871d95158541"></a>
<a class="el" href="namespacefz.html#aabee04df43b16403996baaf6bd9d2a53">segment_memory_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#a7c7e70d241f25a56a485871d95158541">allocate_and_activate_shared_memory</a> (std::string segment_name, unsigned long segmentsize)</td></tr>
<tr class="memdesc:a7c7e70d241f25a56a485871d95158541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get allocator for named segment. The active segment is not changed. <br /></td></tr>
<tr class="separator:a7c7e70d241f25a56a485871d95158541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3233368ec61c9db45b2ed062efb439c7"><td class="memItemLeft" align="right" valign="top"><a id="a3233368ec61c9db45b2ed062efb439c7"></a>
<a class="el" href="classfz_1_1Graph.html">Graph_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#a3233368ec61c9db45b2ed062efb439c7">allocate_Graph_in_shared_memory</a> ()</td></tr>
<tr class="memdesc:a3233368ec61c9db45b2ed062efb439c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">server, allocate a shared memory segment and construct an empty <a class="el" href="classfz_1_1Graph.html">Graph</a> <br /></td></tr>
<tr class="separator:a3233368ec61c9db45b2ed062efb439c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a80babe2c78d83d21c3f77f91898ca5"><td class="memItemLeft" align="right" valign="top"><a id="a5a80babe2c78d83d21c3f77f91898ca5"></a>
<a class="el" href="classfz_1_1Graph.html">Graph_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#a5a80babe2c78d83d21c3f77f91898ca5">find_Graph_in_shared_memory</a> ()</td></tr>
<tr class="memdesc:a5a80babe2c78d83d21c3f77f91898ca5"><td class="mdescLeft">&#160;</td><td class="mdescRight">client, find a <a class="el" href="classfz_1_1Graph.html">Graph</a> in an existing shared memory segment <br /></td></tr>
<tr class="separator:a5a80babe2c78d83d21c3f77f91898ca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f8b06033ab74177534d43da75777b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfz_1_1Graph.html">Graph_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfz_1_1graph__mem__managers.html#af9f8b06033ab74177534d43da75777b5">get_Graph</a> (<a class="el" href="classfz_1_1Graph.html">Graph_ptr</a> &amp;graph_ptr)</td></tr>
<tr class="memdesc:af9f8b06033ab74177534d43da75777b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a <a class="el" href="classfz_1_1Graph.html">Graph</a> pointer from a pointer variable or set that variable to the <a class="el" href="classfz_1_1Graph.html">Graph</a> address in shared memory if the variable was set to nullptr.  <a href="#af9f8b06033ab74177534d43da75777b5">More...</a><br /></td></tr>
<tr class="separator:af9f8b06033ab74177534d43da75777b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70cc04920f62f5fbfb45ef31c9fead2b"><td class="memItemLeft" align="right" valign="top"><a id="a70cc04920f62f5fbfb45ef31c9fead2b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>info</b> (Graph_info_label_value_pairs &amp;meminfo)</td></tr>
<tr class="separator:a70cc04920f62f5fbfb45ef31c9fead2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaffdfa46aaf6d44ac8085f3bc3e4e181"><td class="memItemLeft" align="right" valign="top"><a id="aaffdfa46aaf6d44ac8085f3bc3e4e181"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>info_str</b> ()</td></tr>
<tr class="separator:aaffdfa46aaf6d44ac8085f3bc3e4e181"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:af2754be6553b3f0694ceda8e04e70e87"><td class="memItemLeft" align="right" valign="top"><a id="af2754be6553b3f0694ceda8e04e70e87"></a>
std::map&lt; std::string, <a class="el" href="structfz_1_1shared__memory__manager.html">shared_memory_manager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>managers</b></td></tr>
<tr class="separator:af2754be6553b3f0694ceda8e04e70e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bb88a70f9f0d9336f2749da20a9b75"><td class="memItemLeft" align="right" valign="top"><a id="ab0bb88a70f9f0d9336f2749da20a9b75"></a>
<a class="el" href="structfz_1_1shared__memory__manager.html">shared_memory_manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>active</b></td></tr>
<tr class="separator:ab0bb88a70f9f0d9336f2749da20a9b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b8fccc67beaa3bb5a4be2b2a77e0e7"><td class="memItemLeft" align="right" valign="top"><a id="aa8b8fccc67beaa3bb5a4be2b2a77e0e7"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>active_name</b></td></tr>
<tr class="separator:aa8b8fccc67beaa3bb5a4be2b2a77e0e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Keep track of multiple shared memory segments, switch which one is considered active for allocator use, and provide manager and allocator references. </p>
<p>This class simplifies working with one or more shared memory segments, for example, for separate copies of the <a class="el" href="classfz_1_1Graph.html">Graph</a>, while still keeping memory allocation simple for container classes by having them work with the active set. (No need to provide allocators as parameters in functions within Graphtypes and beyond.)</p>
<p>Note that some of the methods in this class will throw an exception if a segment manager or void allocator is requested when none are active (nullptr). This is a safety measure to ensure that programs using this class do in fact set up at least one manager and allocator. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad751b95fcc96afc311a7492d5715c249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad751b95fcc96afc311a7492d5715c249">&#9670;&nbsp;</a></span>forget_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fz::graph_mem_managers::forget_manager </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>segname</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a manager from the set of managers and delete the corresponding allocator and segment memory objects - but do not destroy the shared memory. </p>
<p>Call this after you have finished working with the shared memory that another process created and that you are not responsible for. By removing the manager and associated objects you can prevent accidentally working with stale shared memory pointes, and you can receive new pointers with the same name in the future.</p>
<p>Note: Removing shared memory is a separate operation that can be called explicitly or by having set <code>remove_on_exit</code>. It is normally the responsibility of the process that created the shared memory to do so.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segname</td><td>Name of the managed segment to forget. </td></tr>
    <tr><td class="paramname">return</td><td>True if the named manager existed and was successfully removed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e5339673869d4485a8f7d718c163fda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e5339673869d4485a8f7d718c163fda">&#9670;&nbsp;</a></span>get_allocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void_allocator &amp; fz::graph_mem_managers::get_allocator </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>segname</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get allocator for named segment (does not change active) </p>
<p>Get allocator for the active segment. </p>

</div>
</div>
<a id="af9f8b06033ab74177534d43da75777b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9f8b06033ab74177534d43da75777b5">&#9670;&nbsp;</a></span>get_Graph()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfz_1_1Graph.html">Graph_ptr</a> fz::graph_mem_managers::get_Graph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfz_1_1Graph.html">Graph_ptr</a> &amp;&#160;</td>
          <td class="paramname"><em>graph_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a <a class="el" href="classfz_1_1Graph.html">Graph</a> pointer from a pointer variable or set that variable to the <a class="el" href="classfz_1_1Graph.html">Graph</a> address in shared memory if the variable was set to nullptr. </p>
<p>For example, see how this is used in Graphmodify.cpp and in fzgraphedit.cpp.</p>
<p>Note: If the pointer variable provided is not nullptr then it is assumed that it contains a valid pointer to a <a class="el" href="classfz_1_1Graph.html">Graph</a> in shared memory. Therefore, make sure to initialize the pointer variable to nullptr at the start of a program!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph_ptr</td><td>A reference to a pointer variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The address of a <a class="el" href="classfz_1_1Graph.html">Graph</a> in shared memory or nullptr if not found.</dd></dl>
<p>For example, see how this is used in Graphmodify.cpp and in fzaddnode.cpp.</p>
<p>Note: If the pointer variable provided is not nullptr then it is assumed that it contains a valid pointer to a <a class="el" href="classfz_1_1Graph.html">Graph</a> in shared memory. Therefore, make sure to initialize the pointer variable to nullptr at the start of a program!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">graph_ptr</td><td>A reference to a pointer variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The address of a <a class="el" href="classfz_1_1Graph.html">Graph</a> in shared memory or nullptr if not found. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>core/include/<a class="el" href="Graphtypes_8hpp_source.html">Graphtypes.hpp</a></li>
<li>core/lib/Graphtypes.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
