<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Formalizer: Formalizer tool: daywiz</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="formalizer-logo-20200907-41x55.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Formalizer
   &#160;<span id="projectnumber">2.0.0-0.1</span>
   </div>
   <div id="projectbrief">The Formalizer System Support Environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Formalizer tool: daywiz </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <code>daywiz</code> tool is a wizard tool that helps carry out a set of System recommended steps throughout the day.</p>
<h1>Files</h1>
<ol type="1">
<li><code>daywiz.py</code>: The principal DayWiz script. Displays and provides interface to DayWiz.</li>
<li><code>consumed.py</code>: Generates a helpful table of known foods for consumption entry.</li>
<li><code>metrics.py</code>: Use this to load metrics data, parse it, and produce useful output.</li>
<li><code>nutrition.py</code>: (Under construction. Intended to help with nutrition planning.)</li>
<li><code>score.py</code>: Generate evaluated and scored output for the day and recent days.</li>
<li><code>wiztable.py</code>: Contains the definition of the table on the left-hand side of the DayWiz page.</li>
<li><code>calendar-info.py</code>: Pull Google Calendar data.</li>
<li><code>convert_to_database.py</code>: Conversion from JSON data file to Formalizer database table.</li>
<li><code>daydata_from_database.py</code>: Testing retrieval of a day's data from the Formalizer database table.</li>
<li><code>daywiz-autodata-cgi.py</code>: CGI entry point to retrieve number of emails, numbe of checkboxes, upcoming calendar entries, and 24 hour emails received</li>
<li><code>daywiz-autodata.py</code>: Retrieve number of emails, numbe of checkboxes, upcoming calendar entries, and 24 hour emails received.</li>
<li><code>email-info-cgi.py</code>: CGI entry point to run <code>email-info.py</code>.</li>
<li><code>email-info.py</code>: Retrieve number of emails unread and optionally the last 24 hours of emails received.</li>
<li><code>inspect_data.py</code>: Inspect the data format and more for data stored in the Formalizer database table.</li>
</ol>
<p>Note that <code>daywiz_json.py</code> is like <code>daywiz.py</code>, but works with the JSON data source and is now deprecated.</p>
<h1>Additional dependencies</h1>
<ol type="1">
<li><code>core/include/fznutrition.py</code>: Data file for known foods, categories, etc.</li>
<li><code>core/include/fzhtmlpage.py</code>: HTML page builder template classes.</li>
</ol>
<h1>Database storage</h1>
<p>The default version of <code>daywiz.py</code> now uses the Formalizer database to store and retrieve data.</p>
<p>The data is stored in multiple tables by datestamp key. The content of each table is in the form of a JSON string containing the relevant data belonging to that table for that particular day.</p>
<p>The nature of the content is transparent to the database, because it is within each JSON construct.</p>
<p>Updating the variables included is relatively easy, because storing and retrieval is done by datestamp key and involves a replacement of all the data in that cell.</p>
<p>The <code>daywiz.py</code> is careful to map available data to the up-to-date data structure expected. Missing data is therefore handled gracefully.</p>
<p>When the data structure is updated in <code>daywiz.py</code> the new data structure will be used and stored when new data is saved. Hence, old data formats will load without causing an error and new formats are adopted smoothly. (See <code>get_day_data()</code>, <code>get_wiz_data()</code> and <code>daypage_wiztable.merge_data()</code> in <code>daywiz.py</code>.)</p>
<p>Therefore, to update the Wiztable data structure, just update <code>wiztable.py</code>.</p>
<h1>More</h1>
<p>See <a href="https://trello.com/c/JssbodOF">https://trello.com/c/JssbodOF</a> .</p>
<p>Also, note that the metrics defined and calculated in the Formalizer component <code>tools/system/metrics</code> are separate from those in DayWiz.</p>
<hr  />
<p> Randal A. Koene, 2023 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
